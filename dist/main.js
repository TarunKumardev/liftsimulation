(()=>{const e=document.querySelector(".sahi"),t=document.querySelector("#floorVal"),l=document.querySelector("#liftVal");function n(){window.innerWidth<300?(t.setAttribute("placeholder","max floors: 10"),l.setAttribute("placeholder","max lifts: 4")):window.innerWidth<400?(t.setAttribute("placeholder","max floors: 10"),l.setAttribute("placeholder","max lifts: 5")):window.innerWidth<500?(t.setAttribute("placeholder","max floors: 10"),l.setAttribute("placeholder","max lifts: 6")):(t.setAttribute("placeholder","max floors: 10"),l.setAttribute("placeholder","max lifts: 10"))}n(),window.addEventListener("resize",(()=>{n()}));const r=e=>{const t=document.getElementById("groundFloor");for(let l=0;l<e;l++){const e=document.createElement("div"),l=document.createElement("span"),n=document.createElement("span");t.appendChild(e),e.append(l,n),e.setAttribute("class","lifts"),l.setAttribute("class","liftDoor"),n.setAttribute("class","liftDoor")}};let o=[];const s=(e,t,l,n)=>{const r=Array.from(document.querySelectorAll(".lifts")),o=Array.from(document.querySelectorAll(".liftDoor"));n[t]=!0;let s=document.querySelectorAll(".floor")[0].offsetHeight,a=""+2*Math.abs(e-l[t]);r[t].style.transform=`translateY(-${e*s/10}rem)`,r[t].style.transition=`transform ${a}s ease-in-out 0s`,setTimeout((()=>{o[2*t].style.transform="translateX(-95%)",o[2*t].style.transition="all 2s ease-in-out 1s",o[2*t+1].style.transform="translateX(95%)",o[2*t+1].style.transition="all 2s ease-in-out 1s"}),1e3*+a+500),setTimeout((()=>{o[2*t].style.transform="translateX(0%)",o[2*t].style.transition="all 2s ease-in-out 1s",o[2*t+1].style.transform="translateX(0%)",o[2*t+1].style.transition="all 2s ease-in-out 1s",setTimeout((()=>{n[t]=!1}),2500)}),1e3*(+a+3.5)),l[t]=+e};function a(e,t,l){let n=[];for(let l of t)n.push(Math.abs(l-+e));let r=100,o=-1;for(let e=0;e<n.length;e++)n[e]<r&&!1===l[e]&&(r=n[e],o=e);return o}function i(e,t,l,n){const r=document.querySelectorAll(".up_btn"),i=document.querySelectorAll(".down_btn");r.forEach(((r,i)=>{e==i&&r.addEventListener("click",(()=>{const e=""+(t-i);if(0===l[0])!1===n[0]&&s(e,0,l,n);else{let t=a(e,l,n);if(!1===n[t])s(e,t,l,n);else{o.includes(e)||o.push(e);let t=setInterval((()=>{if(n.some((e=>!1===e))&&o.length>0){let e=a(o[0],l,n);s(o[0],e,l,n),o.shift()}}),500);0===o.length&&clearInterval(t)}console.log(`queue = ${o}`)}}))})),i.forEach(((r,i)=>{e==i&&r.addEventListener("click",(()=>{const e=""+(t-i);if(0===l[0])!1===n[0]&&s(e,0,l,n);else{let t=a(e,l,n);if(!1===n[t])s(e,t,l,n);else{o.includes(e)||o.push(e);let t=setInterval((()=>{if(n.some((e=>!1===e))&&o.length>0){let e=a(o[0],l,n);s(o[0],e,l,n),o.shift()}}),500);0===o.length&&clearInterval(t)}}}))}))}document.getElementById("startBtn").addEventListener("click",(t=>{t.preventDefault();let l=document.getElementById("floorVal").value,n=document.getElementById("liftVal").value;window.innerWidth,console.log(l,n),""!==l&&""!==n?l<1||n<1?alert("Please enter valid details!"):Number(n)>10?alert("Number of lifts can not be greater than 10!"):Number(n)>Number(l)?alert("Number of lifts can not be greater than number of floors!"):window.innerWidth<300&&Number(n)>4?alert("Number of lifts can not be greater than 4!"):window.innerWidth<400&&Number(n)>5?alert("Number of lifts can not be greater than 5!"):window.innerWidth<500&&Number(n)>6?alert("Number of lifts can not be greater than 6!"):(e.style.display="none",document.querySelector(".container").style.display="block",((e,t)=>{let l=document.getElementById("liftDiv");l.innerHTML="",o=[];let n,s,a,c,u=Array(+t).fill(0),d=Array(+t).fill(!1);for(var m=0;m<=e;m++){let o=document.createElement("div");n=document.createElement("div"),s=document.createElement("p"),a=document.createElement("button"),c=document.createElement("button"),o.setAttribute("class","floor"),n.setAttribute("class","floorInfo"),a.setAttribute("class","up_btn"),c.setAttribute("class","down_btn"),s.innerHTML="Floor "+(e-m),a.innerHTML="▲",c.innerHTML="▼",l.appendChild(o),o.appendChild(n),0!==m&&n.append(a),n.append(s),m!==Number(e)&&n.append(c),m==e&&(o.setAttribute("id","groundFloor"),r(t)),i(m,e,u,d)}})(l,n)):alert("Please enter the details!")})),document.querySelector(".back").addEventListener("click",(()=>{e.style.display="flex",document.querySelector("#liftDiv").innerHTML="",document.querySelector("#floorVal").value="",document.querySelector("#liftVal").value="",document.querySelector(".container").style.display="none"}))})();